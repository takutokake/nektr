import{i as ae,g as ce,a as le,b as de,G as he,r as g,u as A,j as e,F as O,C as B,B as w,V as S,H as M,c as v,d as P,I,e as ue,f as E,T as h,D as Q,h as pe,s as ge,k as xe,l as R,m as q,n as Z,M as me,o as fe,p as je,q as ye,t as be,v as Se,w as b,A as ee,S as N,x as F,y as Ce,P as D,z as we,E as ve,J as _,K as Pe,L,N as Te,O as W,Q as se,R as G,U as Re,W as K,X as Ee,Y as Ie,Z as Ae,_ as te,$ as re,a0 as Ue,a1 as ne,a2 as ke,a3 as Me,a4 as Le,a5 as Ne,a6 as Fe,a7 as J,a8 as ze,a9 as We,aa as ie,ab as X,ac as $e,ad as Ge,ae as Oe,af as Be,ag as qe,ah as De,ai as Ye}from"./vendor-a3c2e350.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();const He={apiKey:"AIzaSyBCLptRXXdj-RaQukE5XD91U8p_w6oG-q4",authDomain:"match-test-50973.firebaseapp.com",projectId:"match-test-50973",storageBucket:"match-test-50973.appspot.com",messagingSenderId:"233696162514",appId:"1:233696162514:web:e8edebb5068857f12e730b"},Y=ae(He),k=ce(Y),z=le(Y);de(Y);const $=new he;$.setCustomParameters({prompt:"select_account"});$.addScope("https://www.googleapis.com/auth/userinfo.email");$.addScope("https://www.googleapis.com/auth/userinfo.profile");function _e(){const[t,n]=g.useState(""),[s,r]=g.useState(""),[a,i]=g.useState(!1),[o,p]=g.useState(!1),[f,y]=g.useState(""),x=A(),C=u=>{console.error("Auth error:",u);let d="An error occurred. Please try again.";switch(u.code){case"auth/invalid-email":d="Invalid email address format.";break;case"auth/user-disabled":d="This account has been disabled.";break;case"auth/user-not-found":d="No account found with this email.";break;case"auth/wrong-password":d="Incorrect password.";break;case"auth/email-already-in-use":d="An account already exists with this email.";break;case"auth/weak-password":d="Password should be at least 6 characters.";break;case"auth/network-request-failed":d="Network error. Please check your internet connection.";break;case"auth/popup-closed-by-user":d="Sign-in popup was closed before completion.";break;default:d=u.message}y(d),x({title:"Authentication Error",description:d,status:"error",duration:5e3,isClosable:!0})},l=async u=>{if(u.preventDefault(),!t||!s){y("Please fill in all fields");return}y(""),p(!0);try{a?(await pe(k,t,s),x({title:"Account created.",description:"You've successfully signed up!",status:"success",duration:5e3,isClosable:!0})):(await ge(k,t,s),x({title:"Welcome back!",description:"You've successfully signed in!",status:"success",duration:5e3,isClosable:!0})),n(""),r("")}catch(d){C(d)}finally{p(!1)}},m=async()=>{y(""),p(!0);try{await xe(k,$),x({title:"Welcome!",description:"You've successfully signed in with Google!",status:"success",duration:5e3,isClosable:!0})}catch(u){C(u)}finally{p(!1)}};return e.jsx(O,{height:"100vh",alignItems:"center",justifyContent:"center",bg:"gray.50",children:e.jsx(B,{maxW:"md",children:e.jsx(w,{bg:"white",p:8,borderRadius:"lg",boxShadow:"lg",width:"100%",children:e.jsxs(S,{spacing:6,children:[e.jsx(M,{size:"lg",children:a?"Create Account":"Sign In"}),e.jsxs(S,{as:"form",spacing:4,w:"100%",onSubmit:l,children:[e.jsxs(v,{isRequired:!0,isInvalid:!!f,children:[e.jsx(P,{children:"Email address"}),e.jsx(I,{type:"email",value:t,onChange:u=>{n(u.target.value),y("")},placeholder:"Enter your email",size:"lg",isDisabled:o})]}),e.jsxs(v,{isRequired:!0,isInvalid:!!f,children:[e.jsx(P,{children:"Password"}),e.jsx(I,{type:"password",value:s,onChange:u=>{r(u.target.value),y("")},placeholder:"Enter your password",size:"lg",isDisabled:o}),f&&e.jsx(ue,{children:f})]}),e.jsx(E,{type:"submit",colorScheme:"blue",size:"lg",width:"full",isLoading:o,loadingText:a?"Creating Account...":"Signing in...",children:a?"Sign Up":"Sign In"})]}),e.jsxs(h,{children:[a?"Already have an account? ":"Don't have an account? ",e.jsx(E,{variant:"link",onClick:()=>{i(!a),y("")},color:"blue.500",isDisabled:o,children:a?"Sign In":"Sign Up"})]}),e.jsx(Q,{}),e.jsx(E,{width:"full",onClick:m,size:"lg",isLoading:o,loadingText:"Signing in with Google...",leftIcon:e.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",style:{width:"18px",height:"18px"}}),children:"Continue with Google"})]})})})})}const Ke=(t={})=>({id:t.id||"",title:t.title||"Untitled Drop",description:t.description||"",startTime:t.startTime||R.now(),endTime:t.endTime||R.now(),location:t.location||"TBD",maxParticipants:t.maxParticipants||10,participants:t.participants||[],theme:t.theme||"General",isSpecialEvent:t.isSpecialEvent||!1,registeredUsers:t.registeredUsers||[],currentParticipants:t.currentParticipants||0,priceRange:t.priceRange||"$",status:t.status||"upcoming",registrationDeadline:t.registrationDeadline||R.now()}),Je=g.createContext({user:null,signup:async()=>{},login:async()=>{},logout:async()=>{}}),H=()=>{const t=g.useContext(Je);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},oe=async(t,n)=>{try{const s=q(z,"users",t);await Z(s,n)}catch(s){throw console.error("Error updating user profile:",s),s}},Xe=["Technology","Food","Sports","Music","Travel","Art","Gaming","Fitness","Movies","Reading"],Ve=["Italian","Japanese","Mexican","Chinese","Indian","Thai","Mediterranean","American","Korean","French"],Qe=["$","$$","$$$","$$$$"],V=[{value:"USC",label:"USC Area",description:"University Park & surrounding neighborhoods"},{value:"UCLA",label:"UCLA Area",description:"Westwood & surrounding neighborhoods"}],Ze=({isOpen:t,onClose:n,initialData:s})=>{var C;const{user:r}=H(),a=A(),[i,o]=g.useState({displayName:(s==null?void 0:s.displayName)||(r==null?void 0:r.displayName)||"",email:(s==null?void 0:s.email)||(r==null?void 0:r.email)||"",interests:(s==null?void 0:s.interests)||[],cuisinePreferences:(s==null?void 0:s.cuisinePreferences)||[],location:(s==null?void 0:s.location)||"",priceRange:(s==null?void 0:s.priceRange)||"",photoURL:(s==null?void 0:s.photoURL)||(r==null?void 0:r.photoURL)||""});g.useEffect(()=>{s&&o({displayName:s.displayName||(r==null?void 0:r.displayName)||"",email:s.email||(r==null?void 0:r.email)||"",interests:s.interests||[],cuisinePreferences:s.cuisinePreferences||[],location:s.location||"",priceRange:s.priceRange||"",photoURL:s.photoURL||(r==null?void 0:r.photoURL)||""})},[s,r]);const p=l=>{const{name:m,value:u}=l.target;o(d=>({...d,[m]:u}))},f=l=>{o(m=>{const u=m.interests||[],d=u.includes(l)?u.filter(j=>j!==l):[...u,l];return{...m,interests:d}})},y=l=>{o(m=>{const u=m.cuisinePreferences||[],d=u.includes(l)?u.filter(j=>j!==l):[...u,l];return{...m,cuisinePreferences:d}})},x=async()=>{try{if(!r)throw new Error("No user found");await oe(r.uid,i),a({title:"Profile Updated",description:"Your profile has been successfully updated.",status:"success",duration:3e3,isClosable:!0}),n()}catch(l){console.error("Error updating profile:",l),a({title:"Update Failed",description:"There was an error updating your profile.",status:"error",duration:3e3,isClosable:!0})}};return e.jsxs(me,{isOpen:t,onClose:n,size:"xl",children:[e.jsx(fe,{}),e.jsxs(je,{children:[e.jsx(ye,{children:"Edit Profile"}),e.jsx(be,{}),e.jsx(Se,{children:e.jsxs(S,{spacing:6,align:"stretch",children:[e.jsxs(b,{spacing:6,align:"center",children:[e.jsx(ee,{size:"2xl",name:i.displayName,src:i.photoURL}),e.jsxs(S,{align:"start",spacing:2,children:[e.jsx(h,{fontSize:"xl",fontWeight:"bold",children:i.displayName}),e.jsx(h,{color:"gray.500",children:i.email})]})]}),e.jsxs(v,{children:[e.jsx(P,{children:"Display Name"}),e.jsx(I,{name:"displayName",value:i.displayName,onChange:p,placeholder:"Enter your display name"})]}),e.jsxs(v,{children:[e.jsx(P,{children:"Location"}),e.jsx(N,{name:"location",value:i.location,onChange:p,placeholder:"Select your area",children:V.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))}),i.location&&e.jsx(w,{mt:2,fontSize:"sm",color:"gray.500",children:(C=V.find(l=>l.value===i.location))==null?void 0:C.description})]}),e.jsxs(v,{children:[e.jsx(P,{children:"Price Range Preference"}),e.jsx(N,{name:"priceRange",value:i.priceRange,onChange:p,placeholder:"Select price range",children:Qe.map(l=>e.jsx("option",{value:l,children:l},l))})]}),e.jsxs(v,{children:[e.jsx(P,{children:"Interests"}),e.jsx(b,{flexWrap:"wrap",children:Xe.map(l=>{var m;return e.jsx(F,{isChecked:(m=i.interests)==null?void 0:m.includes(l),onChange:()=>f(l),children:l},l)})})]}),e.jsxs(v,{children:[e.jsx(P,{children:"Cuisine Preferences"}),e.jsx(b,{flexWrap:"wrap",children:Ve.map(l=>{var m;return e.jsx(F,{isChecked:(m=i.cuisinePreferences)==null?void 0:m.includes(l),onChange:()=>y(l),children:l},l)})})]})]})}),e.jsxs(Ce,{children:[e.jsx(E,{colorScheme:"blue",mr:3,onClick:x,children:"Save Changes"}),e.jsx(E,{variant:"ghost",onClick:n,children:"Cancel"})]})]})]})},es=[{id:"1",title:"First Connection",description:"Make your first match",points:50},{id:"2",title:"Social Butterfly",description:"Complete 5 drops",points:100},{id:"3",title:"Foodie Explorer",description:"Try 3 different cuisines",points:75}],ss=[{id:"1",name:"Newcomer",description:"Welcome to Nectr!",icon:"FaLock"},{id:"2",name:"Connection Master",description:"Made 10 connections",icon:"FaTrophy"}],ts=()=>{const{user:t}=H(),n=r=>{var i;return((i=t==null?void 0:t.completedChallenges)==null?void 0:i.includes(r.id))?e.jsx(ve,{color:"green",style:{marginRight:"10px"}}):e.jsx(_,{color:"gray",style:{marginRight:"10px"}})},s=r=>{switch(r.icon){case"FaTrophy":return e.jsx(Pe,{style:{marginRight:"10px"}});case"FaLock":return e.jsx(_,{style:{marginRight:"10px"}});default:return null}};return e.jsx(w,{p:6,bg:"white",borderRadius:"lg",boxShadow:"md",children:e.jsxs(S,{spacing:6,align:"stretch",children:[e.jsx(h,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"Challenges"}),es.map(r=>{var a;return e.jsxs(b,{spacing:4,align:"center",children:[n(r),e.jsxs(S,{align:"start",flex:1,children:[e.jsx(h,{fontWeight:"bold",children:r.title}),e.jsx(h,{fontSize:"sm",color:"gray.500",children:r.description}),e.jsx(D,{value:(a=t==null?void 0:t.completedChallenges)!=null&&a.includes(r.id)?100:0,size:"sm",colorScheme:"green",width:"full"})]}),e.jsx(we,{label:`${r.points} points`,children:e.jsxs(h,{fontWeight:"bold",color:"green.500",children:["+",r.points]})})]},r.id)}),e.jsx(h,{fontSize:"2xl",fontWeight:"bold",mt:6,mb:4,children:"Badges"}),ss.map(r=>e.jsxs(b,{spacing:4,align:"center",children:[s(r),e.jsxs(S,{align:"start",flex:1,children:[e.jsx(h,{fontWeight:"bold",children:r.name}),e.jsx(h,{fontSize:"sm",color:"gray.500",children:r.description})]})]},r.id))]})})};function rs({startTime:t,theme:n}){const[s,r]=g.useState({hours:0,minutes:0,seconds:0});g.useEffect(()=>{const i=()=>{const p=t.getTime()-new Date().getTime();p>0&&r({hours:Math.floor(p/36e5),minutes:Math.floor(p/1e3/60%60),seconds:Math.floor(p/1e3%60)})};i();const o=setInterval(i,1e3);return()=>clearInterval(o)},[t]);const a=({value:i,label:o})=>e.jsxs(S,{spacing:0,bg:"blue.500",p:4,borderRadius:"md",minW:"100px",children:[e.jsx(h,{fontSize:"3xl",fontWeight:"bold",color:"white",children:i.toString().padStart(2,"0")}),e.jsx(h,{fontSize:"sm",color:"white",children:o})]});return e.jsxs(w,{children:[e.jsxs(h,{fontSize:"xl",mb:4,children:["Next ",n," Drop in:"]}),e.jsxs(b,{spacing:4,justify:"center",children:[e.jsx(a,{value:s.hours,label:"Hours"}),e.jsx(a,{value:s.minutes,label:"Minutes"}),e.jsx(a,{value:s.seconds,label:"Seconds"})]})]})}const ns=({drops:t})=>{const n=L("white","gray.800"),s=L("gray.200","gray.700"),r=t.length>0?t:[{id:"mock-drop-1",title:"Tech Foodies Meetup",description:"Connect with fellow tech enthusiasts over delicious cuisine",startTime:R.now(),endTime:R.now(),location:"Downtown Cafe",maxParticipants:10,participants:[],theme:"Tech & Food",isSpecialEvent:!0,icon:null}],a=o=>o.toDate().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),i=o=>o.toDate().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return e.jsx(w,{p:4,borderWidth:1,borderRadius:"lg",bg:n,borderColor:s,children:e.jsxs(S,{align:"stretch",spacing:4,children:[e.jsxs(M,{size:"md",display:"flex",alignItems:"center",children:[e.jsx(Te,{style:{marginRight:"10px"}})," Upcoming Drops"]}),r.map(o=>{var p;return e.jsx(w,{bg:"gray.50",p:4,borderRadius:"md",children:e.jsxs(S,{align:"stretch",spacing:3,children:[e.jsxs(b,{justifyContent:"space-between",children:[e.jsx(h,{fontWeight:"bold",fontSize:"lg",children:o.title}),o.isSpecialEvent&&e.jsx(W,{colorScheme:"purple",children:"Special Event"})]}),e.jsx(h,{color:"gray.600",children:o.description}),e.jsxs(b,{spacing:3,color:"gray.600",children:[e.jsxs(b,{children:[e.jsx(se,{}),e.jsx(h,{fontSize:"sm",children:o.location||"TBD"})]}),e.jsxs(b,{children:[e.jsx(G,{}),e.jsxs(h,{fontSize:"sm",children:[a(o.startTime)," at ",i(o.startTime)]})]})]}),e.jsxs(b,{justifyContent:"space-between",children:[e.jsxs(h,{fontSize:"sm",children:["Participants: ",((p=o.participants)==null?void 0:p.length)||0," /",o.maxParticipants||"∞"]}),e.jsx(W,{colorScheme:o.theme==="Tech & Food"?"green":o.theme==="Sports"?"blue":"gray",children:o.theme||"General"})]})]})},o.id)})]})})};function is({user:t}){const[n,s]=g.useState(null),[r,a]=g.useState(""),i=A(),o=L("white","gray.800"),p=L("gray.200","gray.700"),f=async()=>{try{const x=te(z,"drops"),C=re(x,Ue("status","==","upcoming")),l=await ne(C),m=[];l.forEach(d=>{m.push({id:d.id,...d.data()})});const u=m.sort((d,j)=>d.startTime.toMillis()-j.startTime.toMillis());s(u[0]||null)}catch(x){console.error("Error fetching next drop:",x)}};g.useEffect(()=>{const x=()=>{if(!n){a("No upcoming drops");return}const l=new Date().getTime(),u=n.startTime.toMillis()-l;if(u<0){a("Drop is live!");return}const d=Math.floor(u%(1e3*60*60*24)/(1e3*60*60)),j=Math.floor(u%(1e3*60*60)/(1e3*60)),c=Math.floor(u%(1e3*60)/1e3);a(`${d}h ${j}m ${c}s`)};f();const C=setInterval(x,1e3);return()=>clearInterval(C)},[n]);const y=async x=>{if(t)try{if(x.registeredUsers.includes(t.uid)){i({title:"Already registered",description:"You are already registered for this drop",status:"info",duration:3e3,isClosable:!0});return}const C=q(z,"drops",x.id);await Z(C,{currentParticipants:x.currentParticipants+1,registeredUsers:ke(t.uid)}),i({title:"Successfully registered!",description:"You'll be notified when it's time to meet your match!",status:"success",duration:5e3,isClosable:!0}),f()}catch(C){console.error("Error registering for drop:",C),i({title:"Error registering for drop",description:"Please try again later",status:"error",duration:3e3,isClosable:!0})}};return e.jsx(w,{p:6,borderWidth:1,borderRadius:"lg",bg:o,borderColor:p,children:e.jsxs(S,{spacing:6,align:"stretch",children:[e.jsxs(b,{justify:"space-between",align:"center",children:[e.jsxs(M,{size:"lg",display:"flex",alignItems:"center",children:[e.jsx(Re,{style:{marginRight:"10px"}}),"Next Drop"]}),e.jsxs(W,{colorScheme:"blue",variant:"subtle",display:"flex",alignItems:"center",children:[e.jsx(K,{style:{marginRight:"5px"}}),"Upcoming"]})]}),n?e.jsx(e.Fragment,{children:e.jsx(w,{children:e.jsxs(S,{align:"start",spacing:4,children:[e.jsxs(b,{width:"full",justify:"space-between",children:[e.jsx(h,{fontSize:"2xl",fontWeight:"bold",children:n.title}),e.jsxs(W,{colorScheme:n.currentParticipants>=n.maxParticipants?"red":"green",fontSize:"md",p:2,borderRadius:"md",display:"flex",alignItems:"center",children:[e.jsx(Ee,{style:{marginRight:"5px"}}),n.currentParticipants,"/",n.maxParticipants," spots"]})]}),e.jsx(h,{color:"gray.600",children:n.description}),e.jsx(Q,{my:2}),e.jsxs(S,{align:"start",spacing:3,width:"full",children:[e.jsxs(b,{children:[e.jsx(se,{color:"gray"}),e.jsx(h,{fontWeight:"semibold",children:"Location:"}),e.jsx(h,{children:n.location})]}),e.jsxs(b,{children:[e.jsx(Ie,{color:"green"}),e.jsx(h,{fontWeight:"semibold",children:"Price Range:"}),e.jsx(h,{children:n.priceRange})]}),e.jsxs(b,{children:[e.jsx(G,{color:"blue"}),e.jsx(h,{fontWeight:"semibold",children:"Drop Time:"}),e.jsx(h,{children:Ae(n.startTime.toDate(),"PPp")})]})]}),e.jsxs(w,{mt:4,textAlign:"center",width:"full",children:[e.jsxs(h,{fontSize:"xl",mb:2,display:"flex",justifyContent:"center",alignItems:"center",children:[e.jsx(G,{style:{marginRight:"10px"}}),"Time until drop:"]}),e.jsx(h,{fontSize:"3xl",fontWeight:"bold",color:"blue.500",children:r})]}),e.jsx(E,{mt:4,colorScheme:"blue",size:"lg",width:"full",leftIcon:e.jsx(K,{}),onClick:()=>y(n),isDisabled:n.registeredUsers.includes(t.uid)||n.currentParticipants>=n.maxParticipants,children:n.registeredUsers.includes(t.uid)?"Already Registered":n.currentParticipants>=n.maxParticipants?"Drop Full":"Join Drop"})]})})}):e.jsx(h,{textAlign:"center",color:"gray.600",children:"No upcoming drops scheduled. Check back soon!"})]})})}function os({user:t}){const n=["Loves trying new restaurants","Enjoys outdoor activities","Tech enthusiast"];return e.jsx(w,{p:6,borderRadius:"lg",bg:"white",boxShadow:"md",border:"1px",borderColor:"gray.200",children:e.jsxs(S,{spacing:4,align:"stretch",children:[e.jsxs(w,{textAlign:"center",children:[e.jsx(Me,{as:Le,w:12,h:12,color:"blue.500"}),e.jsx(h,{fontSize:"xl",fontWeight:"bold",mt:2,children:"Your Mystery Match"})]}),e.jsx(S,{spacing:3,align:"stretch",children:n.map((s,r)=>e.jsxs(w,{children:[e.jsxs(h,{fontSize:"sm",mb:1,children:["Hint ",r+1]}),e.jsx(D,{value:(r+1)*33.33,size:"sm",colorScheme:"blue",borderRadius:"full"}),e.jsx(h,{mt:1,color:"gray.600",children:s})]},r))})]})})}const as=({onDropCreated:t})=>{const n=A(),[s,r]=g.useState({title:"",description:"",startTime:R.now(),registrationDeadline:R.now(),maxParticipants:10,currentParticipants:0,location:"",priceRange:"$",status:"upcoming",registeredUsers:[],theme:"General",isSpecialEvent:!1,endTime:R.now()}),a=async o=>{o.preventDefault();const p=Ke({title:s.title,description:s.description,startTime:s.startTime,endTime:s.endTime,location:s.location,maxParticipants:s.maxParticipants,theme:s.theme,isSpecialEvent:s.isSpecialEvent,registrationDeadline:s.registrationDeadline,priceRange:s.priceRange,status:s.status});try{t&&await t(p),n({title:"Drop Created",description:"Your new drop has been successfully created.",status:"success",duration:3e3,isClosable:!0}),r({title:"",description:"",startTime:R.now(),registrationDeadline:R.now(),maxParticipants:10,currentParticipants:0,location:"",priceRange:"$",status:"upcoming",registeredUsers:[],theme:"General",isSpecialEvent:!1,endTime:R.now()})}catch(f){n({title:"Error",description:"Failed to create drop.",status:"error",duration:3e3,isClosable:!0}),console.error(f)}},i=o=>{const{name:p,value:f}=o.target;r(y=>({...y,[p]:p==="maxParticipants"?Number(f):f}))};return e.jsx(w,{p:6,borderWidth:1,borderRadius:"lg",children:e.jsx("form",{onSubmit:a,children:e.jsxs(S,{spacing:4,children:[e.jsxs(v,{isRequired:!0,children:[e.jsx(P,{children:"Drop Title"}),e.jsx(I,{name:"title",value:s.title,onChange:i,placeholder:"Enter drop title"})]}),e.jsxs(v,{isRequired:!0,children:[e.jsx(P,{children:"Description"}),e.jsx(I,{name:"description",value:s.description,onChange:i,placeholder:"Describe the drop"})]}),e.jsxs(v,{children:[e.jsx(P,{children:"Location"}),e.jsx(I,{name:"location",value:s.location,onChange:i,placeholder:"Enter location"})]}),e.jsxs(v,{children:[e.jsx(P,{children:"Theme"}),e.jsxs(N,{name:"theme",value:s.theme,onChange:i,children:[e.jsx("option",{value:"General",children:"General"}),e.jsx("option",{value:"Tech",children:"Tech"}),e.jsx("option",{value:"Food",children:"Food"}),e.jsx("option",{value:"Sports",children:"Sports"})]})]}),e.jsx(v,{children:e.jsx(F,{isChecked:s.isSpecialEvent,onChange:o=>r(p=>({...p,isSpecialEvent:o.target.checked})),children:"Special Event"})}),e.jsx(E,{colorScheme:"blue",type:"submit",width:"full",children:"Create Drop"})]})})})},cs=({user:t,drops:n=[],onSignOut:s})=>{var m,u,d,j;const{logout:r}=H(),[a,i]=g.useState(!1),o=L("white","gray.800"),p=L("gray.200","gray.700"),f=A(),y=()=>{i(!0)},x=()=>{i(!1)},C=async()=>{try{await r(),s&&s(),f({title:"Logged Out",description:"You have been successfully logged out.",status:"success",duration:3e3,isClosable:!0})}catch{f({title:"Logout Error",description:"An error occurred while logging out.",status:"error",duration:3e3,isClosable:!0})}},l=c=>c?c.toDate():new Date;return e.jsxs(w,{children:[e.jsxs(O,{as:"nav",align:"center",justify:"space-between",wrap:"wrap",padding:"1rem",bg:"white",boxShadow:"md",children:[e.jsx(M,{size:"lg",color:"pink.500",fontWeight:"bold",children:"Nectr"}),e.jsx(Ne,{}),e.jsxs(b,{spacing:4,children:[e.jsx(E,{colorScheme:"red",size:"sm",onClick:C,children:"Sign Out"}),e.jsx(ee,{size:"md",name:(t==null?void 0:t.displayName)||"User",src:t==null?void 0:t.photoURL,onClick:y,cursor:"pointer",_hover:{opacity:.8}})]})]}),e.jsx(Ze,{isOpen:a,onClose:x,initialData:t}),e.jsxs(B,{maxW:"container.xl",py:8,children:[e.jsxs(Fe,{templateColumns:"repeat(3, 1fr)",gap:6,children:[e.jsx(J,{colSpan:2,children:e.jsxs(S,{spacing:6,align:"stretch",children:[e.jsx(rs,{startTime:l((m=n[0])==null?void 0:m.startTime),theme:((u=n[0])==null?void 0:u.theme)||"General"}),e.jsx(ns,{drops:n}),e.jsx(is,{user:t})]})}),e.jsx(J,{colSpan:1,children:e.jsxs(S,{spacing:6,align:"stretch",children:[e.jsx(ts,{}),e.jsx(os,{user:t}),e.jsx(w,{p:6,borderWidth:1,borderRadius:"lg",bg:o,borderColor:p,children:e.jsxs(S,{align:"stretch",spacing:4,children:[e.jsx(M,{size:"md",children:"Your Progress"}),e.jsxs(b,{justify:"space-between",children:[e.jsx(h,{children:"Total Matches"}),e.jsx(h,{fontWeight:"bold",children:t.totalMatches||0})]}),e.jsxs(b,{justify:"space-between",children:[e.jsx(h,{children:"Completed Challenges"}),e.jsx(h,{fontWeight:"bold",children:((d=t.completedChallenges)==null?void 0:d.length)||0})]}),e.jsxs(w,{children:[e.jsx(h,{mb:2,children:"Drop Participation"}),e.jsx(D,{value:(((j=t.completedChallenges)==null?void 0:j.length)||0)/10*100,colorScheme:"blue",borderRadius:"full"})]})]})})]})})]}),t.isAdmin&&e.jsx(as,{})]})]})},ls=["Technology","Food","Sports","Music","Travel","Art","Gaming","Fitness","Movies","Reading"],ds=["Italian","Japanese","Mexican","Chinese","Indian","Thai","Mediterranean","American","Korean","French"],hs=["$","$$","$$$","$$$$"],us=[{value:"USC",label:"USC Area",description:"University Park & surrounding neighborhoods"},{value:"UCLA",label:"UCLA Area",description:"Westwood & surrounding neighborhoods"}],ps=({user:t,onComplete:n})=>{const[s,r]=g.useState(""),[a,i]=g.useState(""),[o,p]=g.useState(""),[f,y]=g.useState([]),[x,C]=g.useState([]),l=A(),m=c=>{y(T=>T.includes(c)?T.filter(U=>U!==c):[...T,c])},u=c=>{C(T=>T.includes(c)?T.filter(U=>U!==c):[...T,c])},d=async c=>{c.preventDefault();try{if(!s||!a||!o||f.length===0||x.length===0){l({title:"Incomplete Profile",description:"Please fill out all fields",status:"error",duration:3e3,isClosable:!0});return}await oe(t.uid,{displayName:s,location:a,priceRange:o,interests:f,cuisinePreferences:x,email:t.email||""}),n&&n(),l({title:"Profile Created",description:"Your profile has been successfully created.",status:"success",duration:3e3,isClosable:!0})}catch(T){console.error("Profile creation error:",T),l({title:"Error",description:"Failed to create profile. Please try again.",status:"error",duration:3e3,isClosable:!0})}},j=async()=>{try{await ie(k)}catch(c){console.error("Sign out error:",c)}};return e.jsx(O,{height:"100vh",alignItems:"center",justifyContent:"center",bg:"gray.50",children:e.jsxs(B,{maxW:"md",position:"relative",children:[e.jsx(ze,{icon:e.jsx(We,{}),"aria-label":"Go Back",position:"absolute",top:"-50px",left:"0",onClick:j,variant:"ghost",colorScheme:"gray"}),e.jsx(w,{bg:"white",p:8,borderRadius:"xl",boxShadow:"lg",width:"100%",children:e.jsxs(S,{spacing:6,align:"stretch",children:[e.jsx(M,{textAlign:"center",color:"pink.500",mb:4,children:"Create Your Profile"}),e.jsx("form",{onSubmit:d,children:e.jsxs(S,{spacing:4,children:[e.jsxs(v,{isRequired:!0,children:[e.jsx(P,{children:"Display Name"}),e.jsx(I,{type:"text",value:s,onChange:c=>r(c.target.value),placeholder:"Enter your display name"})]}),e.jsxs(v,{isRequired:!0,children:[e.jsx(P,{children:"Location"}),e.jsx(N,{placeholder:"Select your area",value:a,onChange:c=>i(c.target.value),children:us.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))})]}),e.jsxs(v,{isRequired:!0,children:[e.jsx(P,{children:"Price Range"}),e.jsx(N,{placeholder:"Select price range",value:o,onChange:c=>p(c.target.value),children:hs.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs(v,{isRequired:!0,children:[e.jsx(P,{children:"Interests"}),e.jsx(b,{flexWrap:"wrap",children:ls.map(c=>e.jsx(F,{isChecked:f.includes(c),onChange:()=>m(c),children:c},c))})]}),e.jsxs(v,{isRequired:!0,children:[e.jsx(P,{children:"Cuisine Preferences"}),e.jsx(b,{flexWrap:"wrap",children:ds.map(c=>e.jsx(F,{isChecked:x.includes(c),onChange:()=>u(c),children:c},c))})]}),e.jsx(E,{colorScheme:"pink",type:"submit",width:"full",mt:4,children:"Create Profile"})]})})]})})]})})};function gs(){const[t,n]=g.useState(null),[s,r]=g.useState(null),[a,i]=g.useState([]),[o,p]=g.useState(!0),[f,y]=g.useState(null),x=A(),C=async d=>{try{const j=q(z,"users",d),c=await Ge(j);return c.exists()?(r(c.data()),!0):!1}catch(j){return console.error("Error fetching profile:",j),!1}},l=async()=>{try{const d=te(z,"drops"),j=re(d,Oe("startTime","asc"),Be(5)),T=(await ne(j)).docs.map(U=>({id:U.id,...U.data()}));i(T)}catch(d){console.error("Error fetching drops:",d),x({title:"Error fetching drops",status:"error",duration:3e3,isClosable:!0})}};g.useEffect(()=>{const d=k.onAuthStateChanged(async j=>{try{j?(console.log("User authenticated:",j.uid),n(j),await C(j.uid)||console.log("No profile found for user"),await l()):(console.log("No user authenticated"),n(null),r(null))}catch(c){console.error("Auth error:",c),y("Authentication error")}finally{p(!1)}});return()=>d()},[]);const m=async()=>{t&&await C(t.uid)},u=async()=>{try{await ie(k),n(null),r(null),y(null),x({title:"Signed out successfully",status:"success",duration:3e3,isClosable:!0})}catch(d){console.error("Sign out error:",d),x({title:"Error signing out",status:"error",duration:3e3,isClosable:!0})}};return o?e.jsx(X,{h:"100vh",children:e.jsx($e,{size:"xl"})}):f?e.jsx(X,{h:"100vh",children:e.jsxs(w,{textAlign:"center",children:[e.jsx(h,{color:"red.500",fontSize:"xl",mb:4,children:f}),e.jsx(E,{onClick:()=>y(null),children:"Try Again"})]})}):t?s?e.jsx(cs,{user:s,drops:a,onSignOut:u}):e.jsx(ps,{user:t,onComplete:m}):e.jsx(_e,{})}qe.createRoot(document.getElementById("root")).render(e.jsx(De.StrictMode,{children:e.jsx(Ye,{children:e.jsx(gs,{})})}));
